<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Mailer - Sri Kanaka Durga</title>
    <style>
        :root {
            --neon: #00f2ff;
            --accent: #7000ff;
            --bg: #030712;
            --glass: rgba(255, 255, 255, 0.05);
            --yahoo: #6001d2;
        }
        body {
            background: var(--bg);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
        }
        .container {
            background: var(--glass);
            backdrop-filter: blur(25px);
            padding: 25px;
            border-radius: 30px;
            border: 1px solid rgba(0, 242, 255, 0.2);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }
        h1 { font-size: 14px; letter-spacing: 4px; color: var(--neon); text-transform: uppercase; margin-bottom: 20px; }
        .input-group { text-align: left; margin-bottom: 12px; }
        label { font-size: 10px; color: #888; text-transform: uppercase; margin-left: 10px; font-weight: bold; }
        input, select, textarea {
            width: 100%; background: rgba(0,0,0,0.4); border: 1px solid #1e293b;
            padding: 12px; color: white; border-radius: 12px; margin-top: 5px; box-sizing: border-box; font-size: 16px; outline: none;
        }
        textarea { height: 100px; resize: none; border-color: #2d3748; }
        textarea:focus { border-color: var(--neon); }
        .mic-area { margin: 15px 0; display: flex; flex-direction: column; align-items: center; }
        .mic-btn {
            width: 70px; height: 70px; border-radius: 50%; border: none;
            background: linear-gradient(135deg, var(--neon), var(--accent));
            color: #000; font-size: 28px; cursor: pointer; transition: 0.4s;
        }
        .mic-btn.active {
            background: #ff0055;
            box-shadow: 0 0 30px #ff0055;
            animation: pulse 1.2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }
        .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .btn {
            padding: 15px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 14px; transition: 0.2s;
        }
        .copy-btn { background: #334155; color: white; }
        .yahoo-btn { background: var(--yahoo); color: white; grid-column: span 2; font-size: 16px; }
        .status { font-size: 11px; color: var(--neon); margin-top: 8px; font-weight: bold; height: 15px; }
    </style>
</head>
<body>

<div class="container">
    <a href="index.html" style="color: #475569; text-decoration: none; font-size: 11px; display: inline-block; margin-bottom: 10px;">‚¨Ö EXIT TO MAIN HUB</a>
    <h1>MAILER for you</h1>

    <div class="input-group">
        <label>Recipient Email</label>
        <input type="email" id="emailTo" placeholder="example@yahoo.com">
    </div>

    <div class="input-group">
        <label>Message Tone</label>
        <select id="toneSelect">
            <option value="Professional">Professional</option>
            <option value="Friendly">Friendly</option>
            <option value="Urgent">Urgent</option>
        </select>
    </div>

    <div class="mic-area">
        <button class="mic-btn" id="micBtn">üéôÔ∏è</button>
        <div class="status" id="status">SYSTEM READY</div>
    </div>

    <div class="input-group">
        <label>Telugu Input (Tap to Edit)</label>
        <textarea id="teluguText" placeholder="Capture voice..."></textarea>
    </div>

    <div class="input-group">
        <label>English Preview (Tap to Edit)</label>
        <textarea id="englishText" placeholder="Translation..."></textarea>
    </div>

    <div class="btn-row">
        <button class="btn copy-btn" id="copyBtn">üìã Copy Text</button>
        <button class="btn" style="background:#1a73e8; color:white;" id="mailBtn">üì± Phone App</button>
        <button class="btn yahoo-btn" id="yahooBtn">üü£ Direct to Yahoo Mail</button>
    </div>
</div>

<script>
    const micBtn = document.getElementById('micBtn');
    const status = document.getElementById('status');
    const teluguText = document.getElementById('teluguText');
    const englishText = document.getElementById('englishText');
    const toneSelect = document.getElementById('toneSelect');

    let isRecording = false;
    const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = 'te-IN';
    recognition.continuous = true;

    micBtn.onclick = () => {
        if (!isRecording) {
            recognition.start();
            micBtn.classList.add('active');
            status.innerText = "RECORDING... TAP TO STOP";
            isRecording = true;
        } else {
            recognition.stop();
            micBtn.classList.remove('active');
            status.innerText = "SYNCING...";
            isRecording = false;
        }
    };

    recognition.onresult = (event) => {
        let transcript = "";
        for (let i = event.resultIndex; i < event.results.length; i++) {
            transcript += event.results[i][0].transcript;
        }
        teluguText.value = transcript;
        processTranslation(transcript);
    };

    async function processTranslation(text) {
        if (!text) return;
        status.innerText = "TRANSLATING...";
        const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(text)}`;
        
        try {
            const response = await fetch(url);
            const data = await response.json();
            if (data && data[0] && data[0][0]) {
                let base = data[0][0][0];
                let tone = toneSelect.value;
                let formatted = base;

                if(tone === "Professional") formatted = `Dear Sir/Madam, I am writing to you regarding: ${base}. Please let me know your thoughts. Regards, Sri Kanaka Durga Generators.`;
                if(tone === "Urgent") formatted = `URGENT NOTICE: Regarding ${base}. Action required immediately.`;
                if(tone === "Friendly") formatted = `Hi, just wanted to reach out regarding ${base}. Hope you are doing well!`;

                englishText.value = formatted;
                status.innerText = "READY FOR REVIEW";
            }
        } catch (e) { status.innerText = "OFFLINE ERROR"; }
    }

    // Manual Edit Listener: If Dad types in Telugu box, it re-translates
    teluguText.oninput = () => {
        clearTimeout(window.tTimer);
        window.tTimer = setTimeout(() => processTranslation(teluguText.value), 1000);
    };

    // COPY FUNCTION
    document.getElementById('copyBtn').onclick = () => {
        englishText.select();
        document.execCommand('copy');
        status.innerText = "‚úÖ COPIED TO CLIPBOARD";
        setTimeout(() => status.innerText = "READY", 2000);
    };

    // REDIRECTS
    const getMailData = () => {
        const to = document.getElementById('emailTo').value;
        const body = englishText.value;
        const sub = "Update from Sri Kanaka Durga Generators";
        return { to, body, sub };
    };

    // Phone App
    document.getElementById('mailBtn').onclick = () => {
        const { to, body, sub } = getMailData();
        window.location.href = `mailto:${to}?subject=${encodeURIComponent(sub)}&body=${encodeURIComponent(body)}`;
    };

    // Yahoo Web Force
    document.getElementById('yahooBtn').onclick = () => {
        const { to, body, sub } = getMailData();
        const yahooUrl = `https://compose.mail.yahoo.com/?to=${to}&subj=${encodeURIComponent(sub)}&body=${encodeURIComponent(body)}`;
        window.open(yahooUrl, '_blank');
    };
</script>
</body>
</html>